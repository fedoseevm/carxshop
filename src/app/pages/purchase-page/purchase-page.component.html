<div *ngIf="car" class="container border pb-5" id="page">
    <a href="" routerLink="/" class="btn btn-outline-dark my-4 ms-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-arrow-return-left me-1" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"/>
        </svg>
        Go back!
    </a>
    <div class="row">
        <div class="col-6">
            <div class="cols g-5">
                <img [src]="car.img" alt="" class="img-fluid img-thumbnail">
                <div class="ps-3 my-4">
                    <p class="details title"><b>Model:</b> {{ car.modelname }} </p>
                    <p class="details title"><b>Manufacturer:</b> {{ car.manufacturer }}</p>
                    <p class="details"><b>Year:</b> {{ car.year }}</p>
                    <p class="details"><b>Horsepower:</b> {{ car.horsepower }}</p>
                    <p class="details"><b>Fuel type:</b> {{ car.fueltype }}</p>
                </div>
            </div>
        </div>
        <form 
        [formGroup]="purchaseForm"
        (ngSubmit)="onSubmit()"
        class="cols col-6 px-5 d-flex flex-column purchase-block"
        >
            <label for="basic-url" class="form-label mb-2">Complete the fields below to make a purchase</label>
            <div class="mb-4 d-flex flex-column">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1">First name</span>
                    <input required type="text" class="form-control" placeholder="Your first name" aria-label="Username" aria-describedby="basic-addon1" formControlName="firstname"
                    [class.invalid]="
                        purchaseForm.get('firstname')?.hasError('required') &&
                        (purchaseForm.get('firstname')?.dirty ||
                        (purchaseForm.get('firstname')?.touched) ||
                        isSubmitted)
                    "
                    >
                </div>
                <span class="validation-error" *ngIf="
                purchaseForm.get('firstname')?.invalid && 
                (purchaseForm.get('firstname')?.dirty || 
                (purchaseForm.get('firstname')?.touched) ||
                isSubmitted)
                "
                >This field is required.</span>
            </div>
            <div class="mb-4 d-flex flex-column">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1">Last name</span>
                    <input required type="text" class="form-control" placeholder="Your last name" aria-label="Username" aria-describedby="basic-addon1" formControlName="lastname"
                    [class.invalid]="
                        purchaseForm.get('lastname')?.hasError('required') &&
                        (purchaseForm.get('lastname')?.dirty ||
                        (purchaseForm.get('lastname')?.touched) ||
                        isSubmitted)
                    "
                    >
                </div>
                <span class="validation-error" *ngIf="
                purchaseForm.get('lastname')?.invalid && 
                (purchaseForm.get('lastname')?.dirty || 
                (purchaseForm.get('lastname')?.touched) ||
                isSubmitted)
                "
                >This field is required.</span>
            </div>
            <div class="mb-4 d-flex flex-column">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1">E-mail</span>
                    <input type="text" class="form-control" placeholder="Your e-mail address" aria-label="Username" aria-describedby="basic-addon1" formControlName="email"
                    [class.invalid]="
                        purchaseForm.get('email')?.invalid &&
                        (purchaseForm.get('email')?.dirty ||
                        (purchaseForm.get('email')?.touched) ||
                        isSubmitted)
                    "
                    >
                </div>
                <span class="validation-error" *ngIf="
                purchaseForm.get('email')?.invalid && 
                (purchaseForm.get('email')?.dirty || 
                (purchaseForm.get('email')?.touched) ||
                isSubmitted)
                "
                >This field is required.</span>
            </div>
            <div class="mb-4 d-flex flex-column">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon1">Delivery address</span>
                    <input type="text" class="form-control" placeholder="Where to deliver" aria-label="Username" aria-describedby="basic-addon1" formControlName="address"
                    [class.invalid]="
                        purchaseForm.get('address')?.invalid &&
                        (purchaseForm.get('address')?.dirty ||
                        (purchaseForm.get('address')?.touched) ||
                        isSubmitted)
                    "
                    >
                </div>
                <span class="validation-error" *ngIf="
                purchaseForm.get('address')?.invalid && 
                (purchaseForm.get('address')?.dirty || 
                (purchaseForm.get('address')?.touched) ||
                isSubmitted)
                "
                >This field is required.</span>
            </div>
            <div class="mt-auto ms-auto">
                <div class="container-fuid">
                    <div>
                        <label for="basic-url" class="form-label mb-2">Your signature</label>
                        <canvas id="signature-canvas" width="500" height="200"></canvas>
                      </div>
                      <div>
                        <button class="btn btn-outline-dark btn-sm" id="clear-button">Clear</button>
                    </div>
                </div>
                <div class="d-flex flex-row justify-content-end">
                    <!-- <a class="btn btn-primary btn-lg my-3" type="submit" href="#" routerLink="/thank-you" role="submit">Purchase</a> -->
                    <p class="my-auto me-5"><b>Final price:</b> {{ car.price | currency }}</p>
                    <button 
                    type="submit" 
                    class="btn btn-primary btn-lg my-3 shadow"
                    id="purchase"
                    >
                    Purchase
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
